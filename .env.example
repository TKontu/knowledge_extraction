# ===================
# SECURITY (REQUIRED)
# ===================
# IMPORTANT: You MUST set a strong API key
# Generate with: openssl rand -hex 32
API_KEY=

# HTTPS enforcement (enable in production)
ENFORCE_HTTPS=false
# HTTPS_REDIRECT_HOST=api.yourdomain.com

# Rate limiting
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW_SECONDS=60

# ===================
# Database
# ===================
DB_USER=scristill
DB_PASSWORD=scristill
DB_NAME=scristill

# ===================
# LLM Configuration (MUST CONFIGURE FOR YOUR SETUP)
# ===================
# IMPORTANT: These are example values - replace with your actual LLM endpoints
# For local development, use localhost; for Docker, use service names or host.docker.internal
# Example options:
#   - Local vLLM: http://localhost:9003/v1
#   - Docker internal: http://host.docker.internal:9003/v1
#   - Remote server: http://YOUR_SERVER_IP:9003/v1
OPENAI_BASE_URL=http://localhost:9003/v1
OPENAI_EMBEDDING_BASE_URL=http://localhost:9003/v1
OPENAI_API_KEY=your-llm-api-key

# Models (adjust to match your deployed models)
LLM_MODEL=your-model-name
RAG_EMBEDDING_MODEL=bge-large-en

# LLM timeouts and retries
LLM_HTTP_TIMEOUT=900
LLM_MAX_RETRIES=5
LLM_RETRY_BACKOFF_MIN=2
LLM_RETRY_BACKOFF_MAX=60

# ===================
# Scraping Configuration
# ===================
# Rate limiting (individual scrapes)
SCRAPE_DELAY_MIN=2
SCRAPE_DELAY_MAX=5
SCRAPE_MAX_CONCURRENT_PER_DOMAIN=2
SCRAPE_DAILY_LIMIT_PER_DOMAIN=500

# Crawl rate limiting (respectful crawling)
# Delay between requests in milliseconds (2000 = 2 seconds)
CRAWL_DELAY_MS=2000
# Max concurrent requests per crawl (2 = polite, won't overwhelm servers)
CRAWL_MAX_CONCURRENCY=2
# Max parallel crawl jobs (different domains) - adjust based on available resources
# 6 = good for 48GB RAM / 6 CPU cores, 3 = conservative, 1 = serial processing
MAX_CONCURRENT_CRAWLS=6

# Retries
SCRAPE_MAX_RETRIES=3
SCRAPE_TIMEOUT=180  # 3 minutes for anti-bot protected sites

# Anti-bot (set to true to enable FlareSolverr)
USE_FLARESOLVERR=false

# ===================
# FlareSolverr Proxy Adapter
# ===================
PROXY_ADAPTER_ENABLED=true
PROXY_ADAPTER_PORT=8192
FLARESOLVERR_URL=http://flaresolverr:8191
FLARESOLVERR_MAX_TIMEOUT=60000
FLARESOLVERR_BLOCKED_DOMAINS=weg.net,siemens.com,wattdrive.com

# ===================
# Camoufox Browser Configuration
# ===================
# Pool size (concurrent browser pages)
# 40 = optimized for 48GB RAM / 6 cores, 20 = medium server, 10 = small server
CAMOUFOX_POOL_SIZE=40
# Page load timeout (milliseconds) - 180000 = 3 minutes
CAMOUFOX_TIMEOUT=180000
# Network idle timeout (milliseconds) - reduced to 5s for faster scraping
CAMOUFOX_NETWORKIDLE_TIMEOUT=5000
# Content stability detection (prevents unnecessary waiting)
CAMOUFOX_CONTENT_STABILITY_CHECKS=2
CAMOUFOX_CONTENT_STABILITY_INTERVAL=500
# Headless mode (true for production)
CAMOUFOX_HEADLESS=true

# ===================
# Extraction Configuration
# ===================
EXTRACTION_DEFAULT_PROFILE=general
EXTRACTION_MAX_CONTENT_LENGTH=50000
EXTRACTION_CHUNK_SIZE=10000
EXTRACTION_CONFIDENCE_THRESHOLD=0.5

# ===================
# Language Filtering
# ===================
# Enable language-based filtering to prevent crawling duplicate non-English content
LANGUAGE_FILTERING_ENABLED=true
# Minimum confidence threshold for content-based detection (0.0-1.0)
LANGUAGE_DETECTION_CONFIDENCE_THRESHOLD=0.7
# Timeout for language detection per page (seconds)
LANGUAGE_DETECTION_TIMEOUT_SECONDS=5.0
# Comma-separated list of ISO 639-1 language codes to exclude
EXCLUDED_LANGUAGE_CODES=de,fi,fr,es,it,nl,pt,pl,ru,sv,no,da

# ===================
# Report Configuration
# ===================
REPORT_MAX_FACTS_PER_SECTION=20
REPORT_MAX_FACTS_TOTAL=200
REPORT_DEFAULT_FORMAT=md
REPORT_CACHE_TTL_HOURS=24

# ===================
# Logging & Monitoring
# ===================
LOG_LEVEL=INFO
LOG_FORMAT=json
ENABLE_METRICS=true

# ===================
# Remote Access
# ===================
# Comma-separated list of allowed CORS origins
# For development: http://localhost:8080
# For production: https://yourdomain.com
ALLOWED_ORIGINS=http://localhost:8080
